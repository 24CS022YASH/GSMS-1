{% extends "base.html" %}
{% block title %}Customers{% endblock %}
{% block content %}
<div class="page-header d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
  <h1 class="h4 mb-0"><i class="bi bi-people me-2"></i>Customers</h1>
  <a href="{{ url_for('customers.customer_add') }}" class="btn btn-primary btn-sm"><i class="bi bi-plus-lg me-1"></i>Add customer</a>
</div>
<form method="get" class="card p-3 mb-3">
  <div class="row g-2 align-items-end">
    <div class="col-auto"><input type="text" name="search" class="form-control form-control-sm" placeholder="Search by name..." value="{{ search or '' }}" style="min-width: 180px;"></div>
    <div class="col-auto"><button type="submit" class="btn btn-outline-primary btn-sm">Search</button></div>
  </div>
</form>
<div class="card overflow-hidden">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light"><tr><th>Name</th><th>Email</th><th>Phone</th><th>Points</th><th class="text-end">Actions</th></tr></thead>
      <tbody>
        {% for c in customers %}
        <tr>
          <td><a href="{{ url_for('customers.customer_detail', customer_id=c.id) }}" class="text-decoration-none fw-medium">{{ c.name }}</a></td>
          <td>{{ c.email or '-' }}</td>
          <td>{{ c.phone or '-' }}</td>
          <td><span class="badge bg-secondary rounded-pill">{{ c.loyalty_points }}</span></td>
          <td class="text-end"><a href="{{ url_for('customers.customer_edit', customer_id=c.id) }}" class="btn btn-sm btn-outline-primary">Edit</a></td>
        </tr>
        {% else %}
        <tr><td colspan="5" class="text-muted text-center py-4">No customers found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
