{% extends "base.html" %}
{% block title %}Activity log{% endblock %}
{% block content %}
<div class="page-header d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
  <h1 class="h4 mb-0"><i class="bi bi-journal-text me-2"></i>Activity log</h1>
  <a href="{{ url_for('users.user_list') }}" class="btn btn-outline-secondary btn-sm">Back to Users</a>
</div>
<div class="card overflow-hidden">
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0 table-sm">
      <thead class="table-light"><tr><th>Time</th><th>User</th><th>Action</th><th>Entity</th><th>Details</th></tr></thead>
      <tbody>
        {% for log in pagination.items %}
        <tr>
          <td class="small">{{ log.created_at }}</td>
          <td><span class="badge bg-secondary">{{ log.user.username if log.user else '-' }}</span></td>
          <td>{{ log.action }}</td>
          <td class="small">{{ log.entity_type }} {{ log.entity_id }}</td>
          <td class="small text-muted">{{ log.details or '-' }}</td>
        </tr>
        {% else %}
        <tr><td colspan="5" class="text-muted text-center py-4">No activity.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
