{% extends "base.html" %}
{% block title %}Receipt #{{ sale.id }}{% endblock %}
{% block content %}
<div class="page-header d-flex flex-wrap justify-content-between align-items-center gap-2 mb-3">
  <h1 class="h4 mb-0"><i class="bi bi-receipt me-2"></i>Receipt #{{ sale.id }}</h1>
  <div class="d-flex gap-2">
    <a href="{{ url_for('pos.index') }}" class="btn btn-primary btn-sm"><i class="bi bi-cart-plus me-1"></i>New sale</a>
    <a href="{{ url_for('main.dashboard') }}" class="btn btn-outline-secondary btn-sm">Dashboard</a>
  </div>
</div>
<div class="card mx-auto" style="max-width: 420px;">
  <div class="card-body p-4">
    <h5 class="text-center fw-bold">{{ store_name }}</h5>
    <p class="text-center small text-muted mb-3">{{ store_address }}<br>{{ store_phone }}</p>
    <hr>
    <p class="small mb-2">Receipt #{{ sale.id }} Â· {{ sale.created_at.strftime('%Y-%m-%d %H:%M') if sale.created_at else '' }}</p>
    <table class="table table-sm table-borderless mb-0">
      <thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Subtotal</th></tr></thead>
      <tbody>{% for item in sale.items %}<tr><td>{{ item.product.name if item.product else '-' }}</td><td>{{ item.quantity }}</td><td>{{ item.unit_price }}</td><td>{{ item.subtotal }}</td></tr>{% endfor %}</tbody>
    </table>
    <hr>
    <p class="mb-1 small">Subtotal: {{ sale.subtotal }}</p>
    <p class="mb-1 small">Tax: {{ sale.tax_amount }}</p>
    <p class="mb-1 small">Discount: {{ sale.discount_amount }}</p>
    <p class="fw-bold mb-1">Total: {{ sale.total }}</p>
    <p class="small mb-0">Payment: {{ sale.payment_method }}</p>
    <hr>
    <p class="text-center small text-muted mb-0">Thank you!</p>
  </div>
</div>
{% endblock %}
