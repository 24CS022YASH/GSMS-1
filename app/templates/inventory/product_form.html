{% extends "base.html" %}
{% block title %}{{ 'Edit' if product else 'Add' }} Product{% endblock %}
{% block content %}
<div class="page-header mb-3">
  <h1 class="h4 mb-0"><i class="bi bi-box-seam me-2"></i>{{ 'Edit' if product else 'Add' }} Product</h1>
</div>
{% include "includes/inventory_nav.html" %}
<form method="post" class="card p-4" style="max-width: 600px;">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <div class="mb-3">
    <label for="name" class="form-label">Name *</label>
    <input type="text" class="form-control" id="name" name="name" required value="{{ product.name if product else '' }}">
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="price" class="form-label">Price</label>
      <input type="number" step="0.01" class="form-control" id="price" name="price" value="{{ product.price if product else 0 }}">
    </div>
    <div class="col-md-6 mb-3">
      <label for="quantity" class="form-label">Quantity</label>
      <input type="number" class="form-control" id="quantity" name="quantity" value="{{ product.quantity if product else 0 }}">
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="category_id" class="form-label">Category</label>
      <select class="form-select" id="category_id" name="category_id">
        <option value="">-</option>
        {% for c in categories %}
        <option value="{{ c.id }}" {{ 'selected' if product and product.category_id == c.id else '' }}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6 mb-3">
      <label for="unit" class="form-label">Unit</label>
      <input type="text" class="form-control" id="unit" name="unit" value="{{ product.unit if product else 'pcs' }}">
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="sku" class="form-label">SKU</label>
      <input type="text" class="form-control" id="sku" name="sku" value="{{ product.sku if product else '' }}">
    </div>
    <div class="col-md-6 mb-3">
      <label for="barcode" class="form-label">Barcode</label>
      <input type="text" class="form-control" id="barcode" name="barcode" value="{{ product.barcode if product else '' }}">
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="expiration_date" class="form-label">Expiration date</label>
      <input type="date" class="form-control" id="expiration_date" name="expiration_date" value="{{ product.expiration_date.strftime('%Y-%m-%d') if product and product.expiration_date else '' }}">
    </div>
    <div class="col-md-6 mb-3">
      <label for="min_stock" class="form-label">Min stock</label>
      <input type="number" class="form-control" id="min_stock" name="min_stock" value="{{ product.min_stock if product else 0 }}">
    </div>
  </div>
  <div class="mb-3">
    <label for="supplier_id" class="form-label">Supplier</label>
    <select class="form-select" id="supplier_id" name="supplier_id">
      <option value="">-</option>
      {% for s in suppliers %}
      <option value="{{ s.id }}" {{ 'selected' if product and product.supplier_id == s.id else '' }}>{{ s.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="d-flex gap-2 mt-2">
    <button type="submit" class="btn btn-primary"><i class="bi bi-check-lg me-1"></i>Save</button>
    <a href="{{ url_for('inventory.product_list') }}" class="btn btn-outline-secondary">Cancel</a>
  </div>
</form>
{% endblock %}
